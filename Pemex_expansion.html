<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Estrategia EnergÃ©tica Pemex 2050 </title>
    <style>
        :root {
            --bg-body: #f8f9fa;
            --text-main: #1a252f;
            --text-sub: #555;
            --arrow-color: #aaa;
            --font-family: 'Segoe UI', system-ui, -apple-system, sans-serif;
        }

        * {
            box-sizing: border-box;
            margin: 0;
            padding: 0;
        }

        body {
            font-family: var(--font-family);
            background-color: var(--bg-body);
            color: var(--text-main);
            min-height: 100vh;
            padding: 24px 16px;
            display: flex;
            flex-direction: column;
            align-items: center;
        }

        /* --- Header --- */
        header {
            text-align: center;
            margin-bottom: 28px;
            max-width: 800px;
        }

        .brand-tag {
            font-size: 11px;
            font-weight: 700;
            letter-spacing: 3px;
            color: #888;
            margin-bottom: 4px;
            text-transform: uppercase;
        }

        h1 {
            font-size: 22px;
            font-weight: 900;
            color: var(--text-main);
            line-height: 1.2;
            margin-bottom: 4px;
        }

        .subtitle {
            font-size: 14px;
            font-weight: 600;
            color: var(--text-sub);
            margin-bottom: 8px;
        }

        .instruction-badge {
            display: inline-block;
            background: #1a5276;
            color: #fff;
            border-radius: 20px;
            padding: 4px 16px;
            font-size: 11px;
            font-weight: 700;
            box-shadow: 0 2px 4px rgba(26, 82, 118, 0.3);
        }

        /* --- Flow Container (Cards) --- */
        .flow-container {
            display: flex;
            align-items: flex-start;
            justify-content: flex-start; /* Permite scroll en mÃ³vil */
            gap: 0; /* El espacio lo maneja la flecha */
            overflow-x: auto;
            padding-bottom: 20px;
            width: 100%;
            max-width: 1200px;
            margin: 0 auto;
            /* Scrollbar styling */
            scrollbar-width: thin;
            scrollbar-color: #ccc #f0f0f0;
            -webkit-overflow-scrolling: touch;
        }

        /* Custom Scrollbar for Chrome/Safari */
        .flow-container::-webkit-scrollbar {
            height: 8px;
        }
        .flow-container::-webkit-scrollbar-track {
            background: #f0f0f0;
            border-radius: 4px;
        }
        .flow-container::-webkit-scrollbar-thumb {
            background-color: #ccc;
            border-radius: 4px;
        }

        .node-wrapper {
            display: flex;
            align-items: flex-start;
            flex-shrink: 0; /* Evita que los cards se encojan */
        }

        /* --- Node Card --- */
        .card {
            width: 190px;
            min-height: 110px;
            border-radius: 12px;
            padding: 14px 16px;
            cursor: pointer;
            transition: all 0.3s cubic-bezier(0.25, 0.8, 0.25, 1);
            position: relative;
            user-select: none;
            /* Variables set via JS */
            border: 2px solid var(--border-color);
            background: var(--bg-color);
        }

        .card:hover {
            transform: translateY(-2px);
        }

        .card.active {
            box-shadow: 0 8px 24px var(--shadow-color);
            z-index: 2;
        }

        .card-icon {
            font-size: 28px;
            margin-bottom: 6px;
            line-height: 1;
        }

        .card-title {
            font-weight: 800;
            font-size: 13px;
            color: var(--text-color);
            line-height: 1.2;
            margin-bottom: 2px;
        }

        .card-subtitle {
            font-weight: 600;
            font-size: 11px;
            color: var(--text-color);
            opacity: 0.85;
            margin-bottom: 6px;
        }

        /* Expanded Content */
        .card-details {
            margin-top: 8px;
            opacity: 0;
            max-height: 0;
            overflow: hidden;
            transition: opacity 0.3s ease, max-height 0.4s ease;
        }

        .card.active .card-details {
            opacity: 1;
            max-height: 500px; /* Altura suficiente para el contenido */
        }

        .card-list {
            list-style: none;
            margin: 0;
            padding-left: 14px;
        }

        .card-list li {
            font-size: 10.5px;
            color: #333;
            margin-bottom: 3px;
            line-height: 1.4;
            position: relative;
        }

        .card-list li::before {
            content: "â€¢";
            color: var(--text-color);
            position: absolute;
            left: -10px;
            font-weight: bold;
        }

        .kpi-badge {
            margin-top: 8px;
            padding: 5px 8px;
            border-radius: 6px;
            font-size: 9.5px;
            font-weight: 700;
            line-height: 1.4;
            color: #fff;
            background: var(--border-color);
            text-align: center;
        }

        .toggle-hint {
            margin-top: 6px;
            font-size: 9px;
            color: var(--text-color);
            opacity: 0.7;
            text-align: right;
        }

        /* --- Arrow Components --- */
        .arrow-container {
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            padding: 0 4px;
            min-width: 20px;
        }

        .arrow-line {
            width: 2px;
            height: 20px;
            background: var(--arrow-color);
        }

        .arrow-head {
            width: 0;
            height: 0;
            border-left: 6px solid transparent;
            border-right: 6px solid transparent;
            border-top: 10px solid var(--arrow-color);
        }

        /* --- Timeline Section --- */
        .timeline-section {
            width: 90%;
            max-width: 980px;
            margin-top: 28px;
        }

        .timeline-labels-top {
            display: flex;
            justify-content: space-between;
            margin-bottom: 4px;
        }

        .t-label {
            text-align: center;
            flex: 1;
            font-size: 10px;
            font-weight: 700;
            white-space: pre-line;
            line-height: 1.3;
        }

        .timeline-bar {
            display: flex;
            height: 12px;
            border-radius: 8px;
            overflow: hidden;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
        }

        .t-segment {
            flex: 1;
            height: 100%;
            opacity: 0.85;
        }

        .timeline-labels-bottom {
            display: flex;
            justify-content: space-between;
            margin-top: 4px;
        }

        .t-label-bottom {
            text-align: center;
            flex: 1;
            font-size: 9px;
            color: #666;
            white-space: pre-line;
            line-height: 1.3;
        }

        /* --- Footer KPIs --- */
        .kpi-footer {
            display: flex;
            justify-content: center;
            gap: 12px;
            flex-wrap: wrap;
            margin-top: 24px;
            width: 100%;
        }

        .kpi-card {
            background: #fff;
            border: 2px solid; /* Color set inline */
            border-radius: 10px;
            padding: 10px 18px;
            text-align: center;
            min-width: 100px;
            box-shadow: 0 2px 6px rgba(0,0,0,0.05);
            transition: transform 0.2s;
        }

        .kpi-card:hover {
            transform: scale(1.05);
        }

        .kpi-title {
            font-size: 9px;
            font-weight: 700;
            color: #888;
            letter-spacing: 1px;
            margin-bottom: 4px;
        }

        .kpi-value {
            font-size: 20px;
            font-weight: 900;
            color: /* set inline */;
            margin-bottom: 2px;
        }

        .kpi-sub {
            font-size: 9px;
            color: #999;
        }

        footer {
            text-align: center;
            margin-top: 20px;
            font-size: 9px;
            color: #bbb;
        }

        /* --- Responsive --- */
        @media (max-width: 768px) {
            .flow-container {
                justify-content: flex-start; /* Asegura scroll desde el inicio */
                padding-left: 10px;
                padding-right: 10px;
            }
            h1 { font-size: 18px; }
            .timeline-section { display: none; } /* Ocultar timeline compleja en mÃ³viles muy pequeÃ±os si es necesario, o ajustar */
            .timeline-section { display: block; font-size: 0.9em; } /* Mantener pero ajustado */
        }
    </style>
</head>
<body>

    <!-- Header -->
    <header>
        <div class="brand-tag">PEMEX Â· CFE Â· ESTRATEGIA ENERGÃ‰TICA</div>
        <h1>NUEVA CADENA DE VALOR INTEGRADA</h1>
        <div class="subtitle">Hoja de Ruta Net Zero Â· 2026â€“2050</div>
        <div class="instruction-badge">Haz clic en cada eslabÃ³n para ver detalle y KPIs</div>
    </header>

    <!-- Main Flow -->
    <div id="flow-container" class="flow-container">
        <!-- Nodes will be injected here by JavaScript -->
    </div>

    <!-- Timeline -->
    <section class="timeline-section">
        <div class="timeline-labels-top" id="timeline-labels-top"></div>
        <div class="timeline-bar" id="timeline-bar"></div>
        <div class="timeline-labels-bottom" id="timeline-labels-bottom"></div>
    </section>

    <!-- KPI Footer -->
    <div id="kpi-footer" class="kpi-footer">
        <!-- KPIs will be injected here -->
    </div>

    <footer>
        Estrategia Productiva Baja en Carbono Â· Pemexâ€“CFE Â· Alineada a Net Zero 2050
    </footer>

    <script>
        // --- DATA ---
        const nodes = [
            {
                id: 1,
                title: "EXPLORACIÃ“N",
                subtitle: "+ Litio / Geotermia",
                icon: "ðŸ”",
                color: "#1a5276",
                bg: "#d6eaf8",
                border: "#1a5276",
                items: ["ExploraciÃ³n sÃ­smica avanzada", "ExtracciÃ³n de Litio en salmueras", "Geotermia profunda (pozos reutilizados)", "Minerales crÃ­ticos (Cu, Ni, Co)"],
                kpi: "KPI: 100% pozos evaluados para Litio/Geotermia al 2030",
            },
            {
                id: 2,
                title: "PRODUCCIÃ“N",
                subtitle: "+ CCUS / Metano Cero",
                icon: "âš™ï¸",
                color: "#1e8449",
                bg: "#d5f5e3",
                border: "#1e8449",
                items: ["Zero Routine Flaring", "LDAR + MRV satelital", "InyecciÃ³n COâ‚‚ en yacimientos", "ElectrificaciÃ³n de plataformas"],
                kpi: "KPI: -80% emisiones metano al 2040 | 15 MtCOâ‚‚/a capturados",
            },
            {
                id: 3,
                title: "REFINACIÃ“N",
                subtitle: "+ HidrÃ³geno / PetroquÃ­mica Circular",
                icon: "ðŸ­",
                color: "#784212",
                bg: "#fdebd0",
                border: "#784212",
                items: ["Hâ‚‚ Azul (SMR + CCUS >90%)", "Hâ‚‚ Verde (electrÃ³lisis + renovables)", "Reciclaje quÃ­mico de plÃ¡sticos", "Especialidades petroquÃ­micas circulares"],
                kpi: "KPI: 10 GW Hâ‚‚ al 2040 | 25% feedstock circular al 2040",
            },
            {
                id: 4,
                title: "COMERCIALIZACIÃ“N",
                subtitle: "+ SAF / CrÃ©ditos de Carbono",
                icon: "âœˆï¸",
                color: "#6c3483",
                bg: "#e8daef",
                border: "#6c3483",
                items: ["SAF (Combustible AviaciÃ³n Sostenible)", "ExportaciÃ³n Hâ‚‚/AmonÃ­aco Verde", "Mercado de crÃ©ditos de carbono", "CertificaciÃ³n de origen limpio"],
                kpi: "KPI: 500 kt/a SAF al 2040 | 30% ingresos bajos en carbono",
            },
            {
                id: 5,
                title: "ECONOMÃA CIRCULAR",
                subtitle: "+ Movilidad ElÃ©ctrica",
                icon: "â™»ï¸",
                color: "#117a65",
                bg: "#d1f2eb",
                border: "#117a65",
                items: ["Red nacional de hidrogeneras", "Electrolineras en estaciones Pemex", "Circularidad plena de materiales", "EconomÃ­a regenerativa comunitaria"],
                kpi: "KPI: NET ZERO operativo 2050 | 100% residuos valorizados",
            },
        ];

        const timelineData = [
            { label: "2026â€“2030\nFundacional", color: "#1a5276", sub: "ExploraciÃ³n\n+ Litio" },
            { label: "2031â€“2035\nEscalamiento", color: "#1e8449", sub: "ProducciÃ³n\n+ CCUS" },
            { label: "2036â€“2040\nExpansiÃ³n", color: "#784212", sub: "RefinaciÃ³n\n+ Hâ‚‚" },
            { label: "2041â€“2045\nConsolidaciÃ³n", color: "#6c3483", sub: "ComercializaciÃ³n\n+ SAF" },
            { label: "2046â€“2050\nNet Zero", color: "#117a65", sub: "EconomÃ­a\nCircular" },
        ];

        const kpis = [
            { label: "Metano", val: "âˆ’80%", sub: "al 2040", color: "#1e8449" },
            { label: "CCUS", val: "40 MtCOâ‚‚/a", sub: "al 2050", color: "#1a5276" },
            { label: "Hâ‚‚", val: "20 GW", sub: "al 2050", color: "#784212" },
            { label: "SAF", val: "500 kt/a", sub: "al 2040", color: "#6c3483" },
            { label: "Net Zero", val: "2050", sub: "Alcance 1+2", color: "#117a65" },
        ];

        // --- RENDER LOGIC ---
        let expandedId = null;

        function init() {
            renderFlow();
            renderTimeline();
            renderKPIs();
        }

        function toggleNode(id) {
            // Toggle logic: if clicking same, close it. If different, open new.
            expandedId = (expandedId === id) ? null : id;
            renderFlow(); // Re-render to update classes
        }

        function renderFlow() {
            const container = document.getElementById('flow-container');
            container.innerHTML = '';

            nodes.forEach((node, index) => {
                const isLast = index === nodes.length - 1;
                const isExpanded = expandedId === node.id;

                // Wrapper for Card + Arrow
                const wrapper = document.createElement('div');
                wrapper.className = 'node-wrapper';

                // Create Card
                const card = document.createElement('div');
                card.className = `card ${isExpanded ? 'active' : ''}`;
                
                // Dynamic Styles for Card
                card.style.setProperty('--text-color', node.color);
                card.style.setProperty('--bg-color', node.bg);
                card.style.setProperty('--border-color', node.border);
                card.style.setProperty('--shadow-color', node.border + '44'); // Adding transparency

                // Card Content
                card.innerHTML = `
                    <div class="card-icon">${node.icon}</div>
                    <div class="card-title">${node.title}</div>
                    <div class="card-subtitle">${node.subtitle}</div>
                    <div class="card-details">
                        <ul class="card-list">
                            ${node.items.map(item => `<li>${item}</li>`).join('')}
                        </ul>
                        <div class="kpi-badge">${node.kpi}</div>
                    </div>
                    <div class="toggle-hint">${isExpanded ? "â–² cerrar" : "â–¼ ver detalle"}</div>
                `;

                card.addEventListener('click', () => toggleNode(node.id));
                wrapper.appendChild(card);

                // Add Arrow if not last
                if (!isLast) {
                    const arrow = document.createElement('div');
                    arrow.className = 'arrow-container';
                    arrow.innerHTML = `
                        <div class="arrow-line"></div>
                        <div class="arrow-head"></div>
                    `;
                    wrapper.appendChild(arrow);
                }

                container.appendChild(wrapper);
            });
        }

        function renderTimeline() {
            const topContainer = document.getElementById('timeline-labels-top');
            const barContainer = document.getElementById('timeline-bar');
            const bottomContainer = document.getElementById('timeline-labels-bottom');

            timelineData.forEach(item => {
                // Top Label
                const topDiv = document.createElement('div');
                topDiv.className = 't-label';
                topDiv.style.color = item.color;
                topDiv.innerText = item.label;
                topContainer.appendChild(topDiv);

                // Bar Segment
                const barDiv = document.createElement('div');
                barDiv.className = 't-segment';
                barDiv.style.backgroundColor = item.color;
                barContainer.appendChild(barDiv);

                // Bottom Label
                const botDiv = document.createElement('div');
                botDiv.className = 't-label-bottom';
                botDiv.innerText = item.sub;
                bottomContainer.appendChild(botDiv);
            });
        }

        function renderKPIs() {
            const footer = document.getElementById('kpi-footer');
            
            kpis.forEach(k => {
                const card = document.createElement('div');
                card.className = 'kpi-card';
                card.style.borderColor = k.color;
                
                card.innerHTML = `
                    <div class="kpi-title">${k.label}</div>
                    <div class="kpi-value" style="color: ${k.color}">${k.val}</div>
                    <div class="kpi-sub">${k.sub}</div>
                `;
                footer.appendChild(card);
            });
        }

        // Run
        document.addEventListener('DOMContentLoaded', init);

    </script>
</body>
</html>